"use strict";(self.webpackChunksolve_card=self.webpackChunksolve_card||[]).push([[880],{880:(e,s,t)=>{t.r(s),t.d(s,{default:()=>j});var l=t(5043),a=t(4219),r=t(7950),i=t(4920),n=t(4858),o=t(3401),d=t(1641),c=t(5313),m=t(3003),h=t(579);const u=e=>{let{closeModal:s,handleChange:t}=e;const u=(0,m.d4)((e=>e.profile.profileId)),[p,x]=(0,l.useState)(""),[g,f]=(0,l.useState)(!1),{register:b,handleSubmit:j,formState:{errors:v}}=(0,n.mN)();return r.createPortal((0,h.jsx)("div",{id:"authentication-modal",tabIndex:"-1","aria-hidden":"false",className:"overflow-y-auto overflow-x-hidden fixed top-0 right-0 left-0 z-50 flex justify-center items-center w-full h-full bg-black bg-opacity-50",children:(0,h.jsxs)("div",{className:"relative p-4 w-full max-w-lg max-h-full",children:[" ",(0,h.jsxs)("div",{className:"relative bg-white rounded-lg shadow",children:[(0,h.jsxs)("div",{className:"flex items-center justify-between p-4 md:p-5 border-b rounded-t",children:[(0,h.jsx)("h3",{className:"text-xl font-semibold text-gray-900 ",children:"Add Contact"}),(0,h.jsxs)("button",{type:"button",onClick:s,className:"text-gray-400 bg-transparent hover:bg-gray-200 hover:text-gray-900 rounded-lg text-sm w-8 h-8 inline-flex justify-center items-center ",children:[(0,h.jsx)("svg",{className:"w-3 h-3","aria-hidden":"true",xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 14 14",children:(0,h.jsx)("path",{stroke:"currentColor",strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:"2",d:"m1 1 6 6m0 0 6 6M7 7l6-6M7 7l-6 6"})}),(0,h.jsx)("span",{className:"sr-only",children:"Close modal"})]})]}),(0,h.jsx)("div",{className:"p-4 md:p-5",children:(0,h.jsxs)("form",{className:"space-y-4",onSubmit:j((async e=>{let l=null;p&&(l=(0,c.i)(p)),f(!0);const a={first_name:e.first_name,last_name:e.last_name,phone:null===e||void 0===e?void 0:e.phone,website:null===e||void 0===e?void 0:e.webiste,email:null===e||void 0===e?void 0:e.email,photo:l,profile_id:u};try{const e=await i.A.post("/addPhoneContact",a);200===e.status&&(o.oR.success(e.data.message,{position:"bottom-right",autoClose:5e3,hideProgressBar:!0,closeOnClick:!0,pauseOnHover:!0,draggable:!0,progress:void 0,theme:"light"}),t(),s())}catch(r){f(!1),o.oR.error(r.response.data.message,{position:"bottom-right",autoClose:5e3,hideProgressBar:!0,closeOnClick:!0,pauseOnHover:!0,draggable:!0,progress:void 0,theme:"light"})}})),encType:"multipart/form-data",children:[(0,h.jsxs)("div",{className:"flex space-x-4",children:[(0,h.jsxs)("div",{className:"w-full",children:[(0,h.jsx)("label",{htmlFor:"first-name",className:"block mb-2 text-sm font-medium text-gray-900 ",children:"First Name"}),(0,h.jsx)(a.pd,{type:"text",nameField:"first_name",intent:"primary",id:"first-name",size:"md",classes:"w-full block p-2.5 ",roundness:"round-sm",placeholder:"First Name",register:b})]}),(0,h.jsxs)("div",{className:"w-full",children:[(0,h.jsx)("label",{htmlFor:"last-name",className:"block mb-2 text-sm font-medium text-gray-900 ",children:"Last Name"}),(0,h.jsx)(a.pd,{type:"text",nameField:"last_name",intent:"primary",id:"last-name",size:"md",classes:"w-full block p-2.5 ",roundness:"round-sm",placeholder:"Last Name",register:b})]})]}),(0,h.jsxs)("div",{className:"w-full",children:[(0,h.jsx)("label",{htmlFor:"email",className:"block mb-2 text-sm font-medium text-gray-900 ",children:"Your Email"}),(0,h.jsx)(a.pd,{type:"email",nameField:"email",intent:"primary",id:"email",size:"md",classes:"w-full block p-2.5 ",roundness:"round-sm",placeholder:"Email",register:b})]}),(0,h.jsxs)("div",{className:"w-full",children:[(0,h.jsx)("label",{htmlFor:"phone",className:"block mb-2 text-sm font-medium text-gray-900 ",children:"Phone"}),(0,h.jsx)(a.pd,{type:"tel",nameField:"phone",intent:"primary",id:"phone",size:"md",classes:"w-full block p-2.5 ",roundness:"round-sm",placeholder:"Phone",maxLength:"11",minLength:"10",register:b})]}),(0,h.jsxs)("div",{className:"w-full",children:[(0,h.jsx)("label",{htmlFor:"website",className:"block mb-2 text-sm font-medium text-gray-900 ",children:"Website"}),(0,h.jsx)(a.pd,{type:"text",nameField:"website",intent:"primary",id:"website",size:"md",classes:"w-full block p-2.5 ",roundness:"round-sm",placeholder:"Website Link",register:b})]}),(0,h.jsxs)("div",{children:[(0,h.jsx)("label",{htmlFor:"profile-pic",className:"block mb-2 text-center text-sm font-medium text-gray-900 ",children:"Profile Picture"}),(0,h.jsxs)("div",{className:"flex items-center justify-center mb-4",children:[(0,h.jsx)("label",{htmlFor:"profile-pic",className:"cursor-pointer",children:(0,h.jsx)("div",{className:"relative w-16 h-16 overflow-hidden bg-gray-200 rounded-full",children:p?(0,h.jsx)("img",{src:p,alt:"Profile",className:"object-cover w-full h-full"}):(0,h.jsx)("span",{className:"flex items-center justify-center w-full h-full text-gray-400",children:"+"})})}),(0,h.jsx)("input",{type:"file",id:"profile-pic",accept:"image/*",onChange:async e=>{const s=e.target.files[0];if(s){if(s.size>4194304)return void o.oR.error("picture size must be less than 6MB.",{position:"bottom-right",autoClose:5e3,hideProgressBar:!0,closeOnClick:!0,pauseOnHover:!0,draggable:!0,progress:void 0,theme:"light"});try{const e={maxSizeMB:6,useWebWorker:!0},t=await(0,d.A)(s,e),l=new FileReader;l.onloadend=()=>{x(l.result)},l.readAsDataURL(t)}catch(t){console.log(t)}}},className:"hidden"})]})]}),(0,h.jsx)(a.$n,{intent:"primary",size:"lg",children:"Add",classes:"w-full !p-2",roundness:"round",loading:g})]})})]})]})}),document.body)};var p=t(6720);const x=e=>{let{closeModal:s,editData:t,handleChange:u}=e;const x=(0,m.d4)((e=>e.profile.profileId)),[g,f]=(0,l.useState)(""),[b,j]=(0,l.useState)({pic:""}),[v,y]=(0,l.useState)(!1),w=(0,l.useRef)(),{register:N,handleSubmit:k,formState:{errors:C},reset:F}=(0,n.mN)();(0,l.useEffect)((()=>{t&&(F({first_name:t.data.first_name?t.data.first_name:"",last_name:t.data.last_name?t.data.last_name:"",email:t.data.email?t.data.email:"",phone:t.data.phone?t.data.phone:"",website:t.data.website?t.data.website:""}),j((e=>{var s;return{...e,pic:null===t||void 0===t||null===(s=t.data)||void 0===s?void 0:s.photo}})))}),[t,F]);return r.createPortal((0,h.jsx)("div",{id:"authentication-modal",tabIndex:"-1","aria-hidden":"false",className:"overflow-y-auto overflow-x-hidden fixed top-0 right-0 left-0 z-50 flex justify-center items-center w-full h-full bg-black bg-opacity-50",children:(0,h.jsxs)("div",{className:"relative p-4 w-full max-w-lg max-h-full",children:[" ",(0,h.jsxs)("div",{className:"relative bg-white rounded-lg shadow",children:[(0,h.jsxs)("div",{className:"flex items-center justify-between p-4 md:p-5 border-b rounded-t",children:[(0,h.jsx)("h3",{className:"text-xl font-semibold text-gray-900 ",children:"Edit Contact"}),(0,h.jsxs)("button",{type:"button",onClick:s,className:"text-gray-400 bg-transparent hover:bg-gray-200 hover:text-gray-900 rounded-lg text-sm w-8 h-8 inline-flex justify-center items-center ",children:[(0,h.jsx)("svg",{className:"w-3 h-3","aria-hidden":"true",xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 14 14",children:(0,h.jsx)("path",{stroke:"currentColor",strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:"2",d:"m1 1 6 6m0 0 6 6M7 7l6-6M7 7l-6 6"})}),(0,h.jsx)("span",{className:"sr-only",children:"Close modal"})]})]}),(0,h.jsx)("div",{className:"p-4 md:p-5",children:(0,h.jsxs)("form",{className:"space-y-4",onSubmit:k((async e=>{let l=(0,c.i)(g);y(!0);try{const a={first_name:e.first_name,last_name:e.last_name,phone:null===e||void 0===e?void 0:e.phone,website:null===e||void 0===e?void 0:e.webiste,email:null===e||void 0===e?void 0:e.email,photo:l,profile_id:x,contact_id:t.data.id},r=await i.A.post("/updatePhoneContact",a);200===r.status&&(o.oR.success(r.data.message,{position:"bottom-right",autoClose:5e3,hideProgressBar:!0,closeOnClick:!0,pauseOnHover:!0,draggable:!0,progress:void 0,theme:"light"}),u(),s())}catch(a){y(!1),o.oR.error(a.response.data.message,{position:"bottom-right",autoClose:5e3,hideProgressBar:!0,closeOnClick:!0,pauseOnHover:!0,draggable:!0,progress:void 0,theme:"light"})}})),encType:"multipart/form-data",children:[(0,h.jsxs)("div",{className:"flex space-x-4",children:[(0,h.jsxs)("div",{className:"w-full",children:[(0,h.jsx)("label",{htmlFor:"first-name",className:"block mb-2 text-sm font-medium text-gray-900 ",children:"First Name"}),(0,h.jsx)(a.pd,{type:"text",nameField:"first_name",intent:"primary",id:"first-name",size:"md",classes:"w-full block p-2.5 ",roundness:"round-sm",placeholder:"first name",register:N})]}),(0,h.jsxs)("div",{className:"w-full",children:[(0,h.jsx)("label",{htmlFor:"last-name",className:"block mb-2 text-sm font-medium text-gray-900 ",children:"Last Name"}),(0,h.jsx)(a.pd,{type:"text",nameField:"last_name",intent:"primary",id:"last-name",size:"md",classes:"w-full block p-2.5 ",roundness:"round-sm",placeholder:"Last Name",register:N})]})]}),(0,h.jsxs)("div",{className:"w-full",children:[(0,h.jsx)("label",{htmlFor:"email",className:"block mb-2 text-sm font-medium text-gray-900 ",children:"Your Email"}),(0,h.jsx)(a.pd,{type:"email",nameField:"email",intent:"primary",id:"email",size:"md",classes:"w-full block p-2.5 ",roundness:"round-sm",placeholder:"Email",register:N})]}),(0,h.jsxs)("div",{className:"w-full",children:[(0,h.jsx)("label",{htmlFor:"phone",className:"block mb-2 text-sm font-medium text-gray-900 ",children:"Phone"}),(0,h.jsx)(a.pd,{type:"tel",nameField:"phone",intent:"primary",id:"phone",size:"md",classes:"w-full block p-2.5 ",roundness:"round-sm",placeholder:"phone",maxLength:"11",minLength:"10",register:N})]}),(0,h.jsxs)("div",{className:"w-full",children:[(0,h.jsx)("label",{htmlFor:"website",className:"block mb-2 text-sm font-medium text-gray-900 ",children:"Website"}),(0,h.jsx)(a.pd,{type:"text",nameField:"website",intent:"primary",id:"website",size:"md",classes:"w-full block p-2.5 ",roundness:"round-sm",placeholder:"Add website link",register:N})]}),(0,h.jsxs)("div",{children:[(0,h.jsx)("label",{className:"block mb-2 text-center text-sm font-medium text-gray-900 ",children:"Profile Picture"}),(0,h.jsxs)("div",{className:"flex items-center justify-center mb-4",children:[(0,h.jsx)("label",{htmlFor:"",className:"",children:(0,h.jsxs)("div",{className:"relative w-16 h-16 overflow-hidden bg-gray-200 rounded-full",children:[b.pic&&(0,h.jsxs)(h.Fragment,{children:[(0,h.jsx)("img",{src:`https://solvecard.net/public/storage/${b.pic}`,alt:"Profile",className:"object-cover w-full h-full"}),(0,h.jsx)(p.uDv,{onClick:()=>{j((e=>({...e,pic:""}))),w.current.value=null},className:"absolute top-3 right-2 cursor-pointer text-black"})]}),g&&(0,h.jsxs)(h.Fragment,{children:[(0,h.jsx)("img",{src:g,alt:"Profile",className:"object-cover w-full h-full"}),(0,h.jsx)(p.uDv,{onClick:()=>{f(""),w.current.value=null},className:"absolute top-3 right-2 cursor-pointer text-black"})]}),!g&&!b.pic&&(0,h.jsx)("span",{onClick:()=>{w.current.click()},className:"flex items-center justify-center w-full h-full text-gray-400",children:"+"})]})}),(0,h.jsx)("input",{type:"file",ref:w,id:"profile-pic",accept:".jpg, .jpeg, .png",onChange:async e=>{const s=e.target.files[0];if(s){if(s.size>4194304)return void o.oR.error("picture size must be less than 6MB.",{position:"bottom-right",autoClose:5e3,hideProgressBar:!0,closeOnClick:!0,pauseOnHover:!0,draggable:!0,progress:void 0,theme:"light"});try{const e={maxSizeMB:6,useWebWorker:!0},t=await(0,d.A)(s,e),l=new FileReader;l.onloadend=()=>{f(l.result)},l.readAsDataURL(t)}catch(t){console.log(t)}}},className:"hidden"})]})]}),(0,h.jsx)(a.$n,{intent:"primary",size:"lg",children:"Add",classes:"w-full !p-2",roundness:"round",loading:v})]})})]})]})}),document.body)};var g=t(9804),f=t(5200);const b=()=>{const e=(0,m.d4)((e=>e.profile.profileId)),[s,t]=(0,l.useState)(!1),[r,n]=(0,l.useState)(!1),[d,c]=(0,l.useState)([]),[p,b]=(0,l.useState)(!1),[j,v]=(0,l.useState)(!1),[y,w]=(0,l.useState)({action:"edit",data:null});(0,l.useEffect)((()=>{!async function(){try{v(!0);const s=await i.A.post("/phoneContacts",{profile_id:e});200===s.status&&(c(s.data.contacts),v(!1))}catch(s){v(!1),o.oR.error(s.response.data.message,{position:"bottom-right",autoClose:5e3,hideProgressBar:!0,closeOnClick:!0,pauseOnHover:!0,draggable:!0,progress:void 0,theme:"light"})}}()}),[p]);const N=()=>{b(!p)};return(0,h.jsx)("div",{className:"w-full min-h-[150px] bg-primary rounded-2xl p-6 mb-8",children:(0,h.jsxs)("div",{className:"flex flex-col gap-4 w-full",children:[(0,h.jsxs)("div",{className:"w-full h-16  rounded-xl flex justify-between items-center",children:[(0,h.jsx)("h1",{className:"font-inter font-bold text-2xl",children:"Contacts"}),(0,h.jsx)(a.$n,{intent:"primary",size:"lg",children:"Add Contact",roundness:"round",classes:"",type:"button",eventAction:()=>{t(!s)}}),s&&(0,h.jsx)(u,{handleChange:N,closeModal:()=>{t(!s)}}),r&&(0,h.jsx)(x,{editData:y,handleChange:N,closeModal:()=>{n(!r)}})]}),(0,h.jsx)("div",{className:"w-full min-h-[150px]  bg-white rounded-xl",children:(0,h.jsx)("div",{className:"w-full h-full  overflow-auto p-3",children:(0,h.jsxs)("table",{className:"w-full text-sm text-left rtl:text-right text-gray-500",children:[(0,h.jsx)("thead",{className:"text-xs text-gray-700 uppercase bg-gray-50",children:(0,h.jsxs)("tr",{children:[(0,h.jsx)("th",{scope:"col",className:"px-6 py-3",children:"User"}),(0,h.jsx)("th",{scope:"col",className:"px-6 py-3",children:"Email"}),(0,h.jsx)("th",{scope:"col",className:"px-6 py-3",children:"Phone"}),(0,h.jsx)("th",{scope:"col",className:"px-6 py-3",children:"Action"})]})}),(0,h.jsx)("tbody",{children:j?(0,h.jsx)("tr",{className:"bg-white border-b",children:(0,h.jsx)("td",{colSpan:4,className:"py-3 text-center text-gray-500",children:"Loading...."})}):(0,h.jsx)(h.Fragment,{children:0===d.length?(0,h.jsx)("tr",{className:"bg-white border-b",children:(0,h.jsx)("td",{colSpan:4,className:"py-3 text-center text-gray-500",children:"No Contacts"})}):(0,h.jsx)(h.Fragment,{children:null===d||void 0===d?void 0:d.map((s=>(0,h.jsxs)("tr",{className:"bg-white border-b hover:bg-gray-50",children:[(0,h.jsxs)("td",{className:"flex items-center px-6 py-4 text-gray-900",children:[s.photo&&(0,h.jsx)("img",{className:"w-10 h-10 rounded-full",src:`https://solvecard.net/public/storage/${s.photo}`,alt:"phot"}),(0,h.jsxs)("div",{className:"ps-3 text-base font-semibold",children:[null===s||void 0===s?void 0:s.first_name," ",null===s||void 0===s?void 0:s.last_name]})]}),(0,h.jsx)("td",{className:"px-6 py-4",children:s.email}),(0,h.jsx)("td",{className:"px-6 py-4",children:null===s||void 0===s?void 0:s.phone}),(0,h.jsxs)("td",{className:"px-6 py-4 flex items-center justify-start gap-2",children:[(0,h.jsx)("div",{onClick:()=>{return e=s,n(!0),void w((s=>({...s,data:e})));var e},className:"bg-gradient-to-r from-tertiary-green-60 to-tertiary-green-70 rounded-full px-2 py-2 cursor-pointer",children:(0,h.jsx)(g.u6n,{className:"text-white size-4"})}),(0,h.jsx)("div",{onClick:()=>(async s=>{try{const t=await i.A.post("/removeContact",{contact_id:s,profile_id:e});200===t.status&&o.oR.success(t.data.message,{position:"bottom-right",autoClose:5e3,hideProgressBar:!0,closeOnClick:!0,pauseOnHover:!0,draggable:!0,progress:void 0,theme:"light"}),b(!p)}catch(t){o.oR.error(t.response.data.message,{position:"bottom-right",autoClose:5e3,hideProgressBar:!0,closeOnClick:!0,pauseOnHover:!0,draggable:!0,progress:void 0,theme:"light"})}})(s.id),className:"bg-red-500 rounded-full px-2 py-2 cursor-pointer",children:(0,h.jsx)(f.Zve,{className:"text-white size-4"})})]})]},s.id)))})})})]})})})]})})};t(3471);const j=()=>(0,h.jsx)("section",{className:"",children:(0,h.jsx)(b,{})})},5313:(e,s,t)=>{t.d(s,{i:()=>l});const l=function(e){let s=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"image/jpeg";const t=atob(e.split(",")[1]),l=new ArrayBuffer(t.length),a=new Uint8Array(l);for(let r=0;r<t.length;r++)a[r]=t.charCodeAt(r);return new Blob([a],{type:s})}}}]);
//# sourceMappingURL=880.0b7c74e6.chunk.js.map