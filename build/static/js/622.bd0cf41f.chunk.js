"use strict";(self.webpackChunksolve_card=self.webpackChunksolve_card||[]).push([[622],{1622:(e,l,t)=>{t.d(l,{LM:()=>W,a2:()=>D,IM:()=>U});var s=t(5043),r=t(5051),o=t(3825),a=t(6720),i=t(3003),n=t(1268),d=t(579);const c=()=>{const e=(0,i.wA)(),l=l=>{e((0,n.kx)(l))};return(0,d.jsx)("nav",{className:"h-full w-full lg:w-1/5 flex justify-center px-2 overflow-y-auto rounded-xl bg-white",id:"profileNav",children:(0,d.jsxs)("div",{className:"flex flex-col gap-8 items-start py-6 w-full",children:[(0,d.jsxs)("div",{className:"flex flex-col w-full gap-2",children:[(0,d.jsx)("h3",{className:"pl-3 font-inter font-semibold text-xl text-gray-600 uppercase",children:"Content"}),(0,d.jsxs)("div",{className:"flex gap-2 items-center p-2 rounded hover:bg-gray-200 cursor-pointer transition duration-300 group",onClick:()=>l("about"),children:[(0,d.jsx)(r.G3M,{className:"text-lg text-black group-hover:text-black transition duration-300"}),(0,d.jsx)("p",{className:"font-inter font-medium text-sm text-gray-700 group-hover:text-black transition duration-300",children:"About"})]}),(0,d.jsxs)("div",{className:"flex gap-2 items-center p-2 rounded hover:bg-gray-200 cursor-pointer transition duration-300 group",onClick:()=>l("links"),children:[(0,d.jsx)(o.bss,{className:"text-lg text-black group-hover:text-black transition duration-300"}),(0,d.jsx)("p",{className:"font-inter font-medium text-sm text-gray-700 group-hover:text-black transition duration-300",children:"Links"})]})]}),(0,d.jsxs)("div",{className:"flex flex-col w-full gap-2",children:[(0,d.jsx)("h3",{className:"pl-3 font-inter font-semibold text-xl text-gray-600 uppercase",children:"Sharing"}),(0,d.jsxs)("div",{onClick:()=>l("qrCode"),className:"flex gap-2 items-center p-2 rounded hover:bg-gray-200 cursor-pointer transition duration-300 group",children:[(0,d.jsx)(a.YSz,{className:"text-lg text-black group-hover:text-black transition duration-300"}),(0,d.jsx)("p",{className:"font-inter font-medium text-sm text-gray-700 group-hover:text-black transition duration-300",children:"QR Code"})]})]})]})})};var u=t(4219),m=t(4858),x=t(2021),h=t(5394),f=t(4920),p=t(3216),v=t(1641),g=t(3401),b=(t(2342),t(5313)),j=t(5288),y=t(3471);const w=()=>{const{id:e}=(0,p.g)(),l=(0,i.wA)(),{register:t}=(0,m.mN)(),r=(0,i.d4)((e=>e.profile.profileData)),o=(0,s.useRef)(null),c=(0,s.useRef)(null),[y,w]=(0,s.useState)(""),[N,k]=(0,s.useState)(""),[_,C]=(0,s.useState)([]),[A,S]=(0,s.useState)([]),[z,R]=(0,s.useState)(!1),[q,L]=(0,s.useState)(!1),[F,$]=(0,s.useState)({photo:"",cover_photo:""}),[P,M]=(0,s.useState)({photo:"",cover_photo:""}),[E,U]=(0,s.useState)({card_title:"",name:"",company:"",job_title:"",address:"",bio:"",photo:"",cover_photo:"",work_position:"",user_direct:0,private:0});(0,s.useEffect)((()=>{var e;r&&(U((e=>({...e,...r}))),$({photo:r.photo||"",cover_photo:r.cover_photo||""}),w(r.background_color_code),l((0,n.JP)(r.background_color_code)),l((0,n.vY)(null!==(e=r.button_color_code)&&void 0!==e?e:"#000000")),k(r.button_color_code))}),[r,l]),(0,s.useEffect)((()=>{l((0,n.J6)(E))}),[E,l]),(0,s.useEffect)((()=>{L(!0);(async()=>{try{const e=await f.A.get("/backgroundColors");C(e.data.Backgrounds)}catch(e){console.error("Error fetching background colors:",e)}})(),(async()=>{try{const e=await f.A.get("/buttonColors");S(e.data.buttonColors)}catch(e){console.error("Error fetching button colors:",e)}L(!1)})()}),[]),(0,s.useEffect)((()=>{if(_.length){const e=_.find((e=>e.id===y||e.color_code===y));w(e.color_code),l((0,n.JP)(e.color_code))}if(A.length){let e=A.find((e=>e.id===N||e.color_code===N));e||(e=A[0]),l((0,n.vY)(e.color_code)),k(e.color_code)}}),[_,A]);const D=async(e,l)=>{const t=e.target.files[0];if(!t||t.size>6291456)g.oR.error(`${l} picture size must be less than 6MB.`);else try{const e=await(0,v.A)(t,{maxSizeMB:4,useWebWorker:!0}),s=new FileReader;s.onloadend=()=>{M((e=>({...e,[l]:(0,b.i)(s.result)}))),U((e=>({...e,[l]:s.result})))},s.readAsDataURL(e)}catch(s){console.error(`Error compressing ${l} image:`,s)}},B=e=>{U((l=>({...l,[e.target.name]:e.target.value})))},Q=e=>{U((l=>({...l,[e.target.name]:Number(e.target.checked)})))},T=e=>{U((l=>({...l,[e]:""}))),$((l=>({...l,[e]:""})))};return(0,d.jsx)("div",{className:"w-full h-full lg:p-4 py-8 px-6 rounded-lg bg-white overflow-hidden",children:(0,d.jsxs)("form",{onSubmit:async t=>{t.preventDefault(),R(!0);const s=["card_title","name","company","job_title","address","bio","work_position"];for(const e of s)if(!E[e])return g.oR.error(`Please enter your ${e.replace("_"," ")}`),void R(!1);let r={...E,profile_id:e,branding_color:"#d5d5d5",cover_photo:P.cover_photo||void 0,photo:P.photo||void 0};const o=_.find((e=>e.id===y||e.color_code===y));let a=A.find((e=>e.id===N||e.color_code===N));try{const t=await f.A.post("/updateProfile",r);var i,d;if(200===t.status)await f.A.post("/updateBackgroundColor",{profile_id:e,bg_color_id:o.id}),await f.A.post("/updateButtonColor",{profile_id:e,btn_color_id:a.id}),setTimeout((()=>{console.log("after delay",t.data.message),g.oR.success(t.data.message)}),100),console.log("final",t.data,"body",r),l((0,n.cp)({...E,cover_photo:null!==(i=r.cover_photo)&&void 0!==i?i:F.cover_photo,photo:null!==(d=r.photo)&&void 0!==d?d:F.photo,background_color_code:o.color_code,button_color_code:a.color_code}))}catch(m){var c,u;g.oR.error((null===(c=m.response)||void 0===c||null===(u=c.data)||void 0===u?void 0:u.message)||"Error updating profile")}finally{R(!1)}},className:"relative w-full h-full bg-white",id:"profileEdit",encType:"multipart/form-data",children:[(0,d.jsx)("div",{className:"sticky top-0 bg-white pb-4 z-10",children:(0,d.jsx)("h1",{className:"font-inter font-bold text-xl",children:"About"})}),(0,d.jsx)("div",{className:"lg:h-[calc(100%-7rem)] w-full lg:absolute overflow-y-auto",children:(0,d.jsxs)("div",{className:"grid grid-cols-1 lg:grid-cols-2 gap-4 w-full pr-2",children:[(0,d.jsxs)("div",{className:"w-full",children:[(0,d.jsx)("label",{htmlFor:"card-title",className:"block mb-2 text-sm font-medium text-gray-900",children:"Card Title"}),(0,d.jsx)(u.pd,{type:"text",name:"card_title",intent:"primary",id:"card-title",size:"md",value:null===E||void 0===E?void 0:E.card_title,classes:"w-full block p-2.5",roundness:"round-sm",placeholder:"Card Title",custom:"custom",eventAction:B})]}),(0,d.jsxs)("div",{className:"w-full",children:[(0,d.jsx)("label",{htmlFor:"work_position",className:"block mb-2 text-sm font-inter font-medium text-gray-900",children:"Card Layout"}),(0,d.jsxs)("select",{onChange:B,name:"work_position",value:null===E||void 0===E?void 0:E.work_position,className:"w-full block px-2.5 py-3.5 font-inter outline-none bg-primary placeholder:text-sm placeholder:font-normal rounded-md",children:[(0,d.jsx)("option",{value:"left",children:"Left"}),(0,d.jsx)("option",{value:"center",children:"Center"}),(0,d.jsx)("option",{value:"right",children:"Right"})]})]}),(0,d.jsxs)("div",{className:"flex flex-col gap-4 items-center",children:[(0,d.jsxs)("div",{className:"flex items-center gap-2",children:[(0,d.jsx)("p",{className:"font-inter text-sm font-medium text-gray-900",children:"Profile Picture"}),(0,d.jsx)(h.tEG,{className:"text-xl text-gray-500",title:"Maximum size: 2MB"})]}),(null===r||void 0===r?void 0:r.photo)&&(null===F||void 0===F?void 0:F.photo)&&(0,d.jsxs)("div",{className:"h-full w-full  relative",children:[(0,d.jsx)("img",{src:`https://solvecard.net/public/storage/${F.photo}`,className:"rounded-full h-full aspect-square w-2/5 mx-auto object-cover",alt:"profile_pic"}),(0,d.jsx)(a.uDv,{className:"absolute size-5 -top-2 right-1/2 -translate-x-1/2 text-red-500 bg-white rounded-full cursor-pointer",onClick:()=>T("photo")})]}),E.photo&&!(null!==F&&void 0!==F&&F.photo)&&(0,d.jsxs)("div",{className:"w-full h-full relative",children:[(0,d.jsx)("img",{src:E.photo,className:"rounded-full h-full aspect-square w-2/5 mx-auto object-cover",alt:""}),(0,d.jsx)(a.uDv,{className:"absolute size-5 -top-2 right-1/2 -translate-x-1/2 text-red-500 bg-white rounded-full cursor-pointer",onClick:()=>T("photo")})]}),!F.photo&&!E.photo&&(0,d.jsx)("div",{onClick:()=>o.current.click(),className:"flex justify-center items-center rounded-full w-28 h-28 border border-dashed border-gray-400 bg-white hover:bg-gray-100 transition-all cursor-pointer",children:(0,d.jsxs)("div",{className:"flex flex-col items-center justify-center gap-1",children:[(0,d.jsx)(x.GpL,{className:"text-4xl text-gray-500"}),(0,d.jsx)("p",{className:"font-inter text-xs text-gray-500 text-center",children:"Select or drag file"})]})}),(0,d.jsx)("input",{type:"file",ref:o,accept:".jpg, .png, .jpeg",className:"hidden",onChange:e=>D(e,"photo")})]}),(0,d.jsxs)("div",{className:"flex flex-col gap-4 items-center",children:[(0,d.jsxs)("div",{className:"flex items-center gap-2",children:[(0,d.jsx)("p",{className:"font-inter text-sm font-medium text-gray-900",children:"Cover Photo"}),(0,d.jsx)(h.tEG,{className:"text-xl text-gray-500",title:"Maximum size: 5MB"})]}),(null===r||void 0===r?void 0:r.cover_photo)&&(null===F||void 0===F?void 0:F.cover_photo)&&(0,d.jsxs)("div",{className:"h-full w-full relative",children:[(0,d.jsx)("img",{src:`https://solvecard.net/public/storage/${null===F||void 0===F?void 0:F.cover_photo}`,className:"max-h-24 w-full rounded-lg object-cover",alt:"cover_pic"}),(0,d.jsx)(a.uDv,{className:"absolute top-0 right-0 text-red-500 bg-white rounded-full cursor-pointer",onClick:()=>T("cover_photo")})]}),(null===E||void 0===E?void 0:E.cover_photo)&&!(null!==F&&void 0!==F&&F.cover_photo)&&(0,d.jsxs)("div",{className:"h-full w-full relative",children:[(0,d.jsx)("img",{src:null===E||void 0===E?void 0:E.cover_photo,className:"max-h-24 w-full rounded-lg object-cover",alt:"cover_pic"}),(0,d.jsx)(a.uDv,{className:"absolute top-0 right-0 text-red-500 bg-white rounded-full cursor-pointer",onClick:()=>T("cover_photo")})]}),!F.cover_photo&&!E.cover_photo&&(0,d.jsx)("div",{onClick:()=>c.current.click(),className:"flex items-center justify-center rounded-lg h-28 w-full border border-dashed border-gray-400 bg-white hover:bg-gray-100 transition-all cursor-pointer",children:(0,d.jsxs)("div",{className:"flex flex-col items-center gap-2",children:[(0,d.jsx)(a.lQv,{className:"text-3xl text-gray-500"}),(0,d.jsx)("p",{className:"font-inter text-xs text-gray-500 text-center",children:"Select image, gif, video, or drag & drop"})]})}),(0,d.jsx)("input",{type:"file",accept:".jpg, .png, .jpeg",ref:c,className:"hidden",onChange:e=>D(e,"cover_photo")})]}),(0,d.jsxs)("div",{className:"w-full",children:[(0,d.jsx)("label",{htmlFor:"first-name",className:"block mb-2 text-sm font-medium text-gray-900",children:"Name"}),(0,d.jsx)(u.pd,{type:"text",name:"name",intent:"primary",id:"first-name",size:"md",value:null===E||void 0===E?void 0:E.name,classes:"w-full block p-2.5 ",roundness:"round-sm",placeholder:"first name",custom:"custom",eventAction:B})]}),(0,d.jsxs)("div",{className:"w-full",children:[(0,d.jsx)("label",{htmlFor:"company",className:"block mb-2 text-sm font-inter font-medium text-gray-900",children:"Company"}),(0,d.jsx)(u.pd,{type:"text",name:"company",intent:"primary",id:"company",size:"md",value:E.company,classes:"w-full block p-2.5 ",roundness:"round-sm",placeholder:"company",custom:"custom",eventAction:B})]}),(0,d.jsxs)("div",{className:"w-full",children:[(0,d.jsx)("label",{htmlFor:"job_title",className:"block mb-2 text-sm font-medium text-gray-900",children:"Job Title"}),(0,d.jsx)(u.pd,{type:"text",name:"job_title",intent:"primary",id:"job_title",size:"md",classes:"w-full block p-2.5 ",roundness:"round-sm",placeholder:"Job Title",custom:"custom",value:E.job_title,eventAction:B})]}),(0,d.jsxs)("div",{className:"w-full",children:[(0,d.jsx)("label",{htmlFor:"address",className:"block mb-2 text-sm font-inter font-medium text-gray-900",children:"Address"}),(0,d.jsx)(u.fs,{rows:"2",intent:"primary",classes:"w-full !rounded-md p-2",name:"address",placeholder:"Address",value:null===E||void 0===E?void 0:E.address,eventAction:B})]}),(0,d.jsxs)("div",{className:"flex flex-col gap-2 w-full",children:[(0,d.jsx)("label",{htmlFor:"bio",className:"block text-sm font-inter font-medium text-gray-900",children:"Bio"}),(0,d.jsx)(u.fs,{rows:"2",intent:"primary",placeholder:"Bio",classes:"w-full !rounded-md p-2",name:"bio",value:null===E||void 0===E?void 0:E.bio,eventAction:B})]}),(0,d.jsxs)("div",{className:"lg:col-span-2 flex flex-col gap-2 w-full",children:[(0,d.jsx)("label",{htmlFor:"last-name",className:"block mb-2 text-sm font-inter font-medium text-gray-900 ",children:"Choose Theme:"}),(0,d.jsx)("div",{className:"w-full bg-primary min-h-16 rounded-lg py-2 px-3",children:(0,d.jsxs)("div",{className:"flex flex-col gap-4",children:[(0,d.jsxs)("div",{className:"w-full rounded-lg flex flex-row lg:gap-0 md:gap-0 gap-3 items-center justify-between bg-white border border-primary p-4",children:[(0,d.jsx)("label",{htmlFor:"",className:"block text-sm font-inter font-medium text-gray-900 ",children:"Profile/Card Theme"}),(0,d.jsxs)("div",{className:"flex items-center justify-end flex-grow flex-wrap gap-2",children:[null===_||void 0===_?void 0:_.map((e=>(0,d.jsx)("div",{className:"relative rounded-full w-6 h-6 cursor-pointer border",style:{backgroundColor:e.color_code},onClick:()=>(e=>{w(e),l((0,n.JP)(e))})(e.color_code),children:y===e.color_code&&(0,d.jsx)("div",{className:"absolute inset-0 flex items-center justify-center",children:(0,d.jsx)("svg",{className:"w-4 h-4 text-white",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",xmlns:"http://www.w3.org/2000/svg",children:(0,d.jsx)("path",{d:"M5 13l4 4L19 7"})})})},e.id))),!_.length&&(0,d.jsx)("span",{className:"loader !w-8 !h-8"})]})]}),(0,d.jsx)("div",{className:"w-full rounded-lg flex flex-col gap-2 bg-white border border-primary p-4",children:(0,d.jsxs)("div",{className:"flex items-center justify-between",children:[(0,d.jsx)("label",{htmlFor:"",className:"block text-sm font-inter font-medium text-gray-900 ",children:"Link Color"}),(0,d.jsxs)("div",{className:"flex items-center justify-end flex-grow flex-wrap gap-2",children:[null===A||void 0===A?void 0:A.map((e=>(0,d.jsx)("div",{className:"relative rounded-full w-6 h-6 cursor-pointer border",style:{backgroundColor:e.color_code},onClick:()=>(e=>{k(e),l((0,n.vY)(e))})(e.color_code),children:N===e.color_code&&(0,d.jsx)("div",{className:"absolute inset-0 flex items-center justify-center",children:(0,d.jsx)("svg",{className:"w-4 h-4 text-white",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",xmlns:"http://www.w3.org/2000/svg",children:(0,d.jsx)("path",{d:"M5 13l4 4L19 7"})})})},e.id))),!A.length&&(0,d.jsx)("span",{className:"loader !w-8 !h-8"})]})]})})]})})]}),(0,d.jsx)("div",{className:"w-full bg-primary rounded-lg p-2",children:(0,d.jsxs)("div",{className:"bg-white p-1.5 rounded-lg flex items-center justify-between",children:[(0,d.jsx)("label",{htmlFor:"last-name",className:"block  text-sm font-inter font-medium text-gray-900",children:"Card Private"}),(0,d.jsx)("div",{children:(0,d.jsxs)("label",{className:"inline-flex items-center cursor-pointer",children:[(0,d.jsx)("input",{type:"checkbox",name:"private",value:E.private,checked:E.private,className:"sr-only peer",onChange:Q}),(0,d.jsx)("div",{className:"relative w-11 h-6 bg-gray-200 peer-focus:outline-none peer-focus:ring-4 peer-focus:ring-white  rounded-full peer peer-checked:after:translate-x-full rtl:peer-checked:after:-translate-x-full peer-checked:after:border-white after:content-[''] after:absolute after:top-[2px] after:start-[2px] after:bg-white after:border-gray-300 after:border after:rounded-full after:h-5 after:w-5 after:transition-all peer-checked:bg-black"})]})})]})}),(0,d.jsx)("div",{className:"w-full bg-primary rounded-lg p-2",children:(0,d.jsxs)("div",{className:"bg-white p-1.5 rounded-lg flex items-center justify-between",children:[(0,d.jsx)("label",{htmlFor:"last-name",className:"block  text-sm font-inter font-medium text-gray-900",children:"User Direct"}),(0,d.jsx)("div",{children:(0,d.jsxs)("label",{className:"inline-flex items-center cursor-pointer",children:[(0,d.jsx)("input",{type:"checkbox",name:"user_direct",value:E.user_direct,checked:E.user_direct,className:"sr-only peer",onChange:Q}),(0,d.jsx)("div",{className:"relative w-11 h-6 bg-gray-200 peer-focus:outline-none peer-focus:ring-4 peer-focus:ring-white  rounded-full peer peer-checked:after:translate-x-full rtl:peer-checked:after:-translate-x-full peer-checked:after:border-white after:content-[''] after:absolute after:top-[2px] after:start-[2px] after:bg-white after:border-gray-300 after:border after:rounded-full after:h-5 after:w-5 after:transition-all peer-checked:bg-black"})]})})]})})]})}),(0,d.jsxs)("div",{className:"absolute bottom-0 left-0 right-0 pt-4 w-full bg-white flex justify-end items-center gap-4",children:[(0,d.jsx)(u.$n,{type:"submit",intent:"primary",children:"Update",size:"lg",loading:z,roundness:"round",classes:"!bg-black !text-white",disabled:q}),(0,d.jsx)(j.A,{intent:"secondary",size:"lg",content:"Cancel",classes:"gap-2 !py-3 !px-6",href:"/dashboard"})]})]})})};var N=t(5200),k=t(7950);const _=e=>{let{closeModal:l,data:t,id:r}=e;const[o,a]=(0,s.useState)(""),[c,m]=(0,s.useState)(""),[x,h]=(0,s.useState)(""),[p,v]=(0,s.useState)(!1),b=(0,i.wA)();(0,s.useEffect)((()=>{console.log("daaata",t),null!==t&&void 0!==t&&t.baseUrl&&(m(null===t||void 0===t?void 0:t.baseUrl),h(null===t||void 0===t?void 0:t.baseUrl)),null!==t&&void 0!==t&&t.path&&h((null===t||void 0===t?void 0:t.baseUrl)+(null===t||void 0===t?void 0:t.path)),null!==t&&void 0!==t&&t.label&&a(null===t||void 0===t?void 0:t.label)}),[null===t||void 0===t?void 0:t.baseUrl,null===t||void 0===t?void 0:t.path,null===t||void 0===t?void 0:t.label]);return k.createPortal((0,d.jsx)("div",{id:"authentication-modal",tabIndex:"-1","aria-hidden":"false",className:"overflow-y-auto overflow-x-hidden fixed top-0 right-0 left-0 z-50 flex justify-center items-center w-full h-full bg-black bg-opacity-50",children:(0,d.jsx)("div",{className:"relative p-4 w-full max-w-lg max-h-full",children:(0,d.jsxs)("div",{className:"relative bg-white rounded-lg shadow ",children:[(0,d.jsxs)("div",{className:"flex items-center justify-between p-4 md:p-5 border-b rounded-t dark:border-gray-600",children:[(0,d.jsxs)("h3",{className:"text-xl font-semibold text-gray-900 dark:text-gray-900",children:[null!==t&&void 0!==t&&t.path?"Edit":"Add"," Link Info"]}),(0,d.jsxs)("button",{type:"button",onClick:l,className:"text-gray-400 bg-transparent hover:bg-gray-200 hover:text-gray-900 rounded-lg text-sm w-8 h-8 inline-flex justify-center items-center dark:hover:bg-gray-900 dark:hover:text-white",children:[(0,d.jsx)("svg",{className:"w-3 h-3","aria-hidden":"true",xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 14 14",children:(0,d.jsx)("path",{stroke:"currentColor",strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:"2",d:"m1 1 6 6m0 0 6 6M7 7l6-6M7 7l-6 6"})}),(0,d.jsx)("span",{className:"sr-only",children:"Close modal"})]})]}),(0,d.jsx)("div",{className:"p-4 md:p-5",children:(0,d.jsxs)("form",{onSubmit:async e=>{if(e.preventDefault(),""===o)return void g.oR.error("Title Field is required.");const s=c?x.replace(c,""):x;if(""===s||s.length<2)g.oR.error("Link Field is required with minimum of 2 characters.");else{v(!0);try{const e=await f.A.post("/addPlatform",{platform_id:null===t||void 0===t?void 0:t.user_platforms_id,path:s,profile_id:r,label:o});var a;if(200===e.status)b((0,n.ib)({id:null===t||void 0===t?void 0:t.id,user_platforms_id:null===t||void 0===t?void 0:t.user_platforms_id,title:null===t||void 0===t?void 0:t.title,icon:null===t||void 0===t?void 0:t.icon,path:c?x.replace(c,""):x,label:o,baseUrl:null===t||void 0===t?void 0:t.baseUrl,direct:null!==(a=null===t||void 0===t?void 0:t.direct)&&void 0!==a?a:1})),g.oR.success(e.data.message),l()}catch(i){g.oR.error(i.response.data.message)}finally{v(!1)}}},className:"space-y-4 text-center w-full",children:[(0,d.jsx)("div",{className:"flex justify-center items-center size-10 rounded-full bg-tertiary-green-30 mx-auto",children:(0,d.jsx)("img",{src:`https://solvecard.net/public/storage/${t.icon}`,className:"size-6",alt:""})}),(0,d.jsxs)("h1",{className:"text-black dark:text-black",children:["Add ",t.title]}),(0,d.jsxs)("div",{children:[(0,d.jsx)("h1",{className:"text-black text-left",children:"Title"}),(0,d.jsx)(u.pd,{intent:"primary",size:"lg",roundness:"round-md",label:"Title",placeholder:"Enter Title",custom:"custom",classes:"w-full",name:"title",value:o,eventAction:e=>{const l=e.target.value;a(l)}})]}),(0,d.jsxs)("div",{children:[(0,d.jsx)("h1",{className:"text-black text-left",children:"Link"}),(0,d.jsx)(u.pd,{intent:"primary",size:"lg",roundness:"round-md",label:"Link",placeholder:null!==t&&void 0!==t&&t.baseUrl?null===t||void 0===t?void 0:t.baseUrl:"Enter Link",custom:"custom",classes:"w-full",name:"link",value:x,eventAction:e=>{const l=e.target.value;h(l)}})]}),(0,d.jsx)(u.$n,{intent:"primary",size:"md",roundness:"round",children:"Submit",classes:"!w-1/2 !p-2 !mx-auto",loading:p})]})})]})})}),document.body)},C=e=>{let{id:l,closeModal:t}=e;const r=(0,i.d4)((e=>{var l;return null===e||void 0===e||null===(l=e.auth)||void 0===l?void 0:l.user})),[o,a]=(0,s.useState)([]),[n,c]=(0,s.useState)(null),[u,m]=(0,s.useState)(!1),[x,h]=(0,s.useState)(null),p=(0,s.useRef)({}),[v,b]=(0,s.useState)(!0),j=async()=>{try{var e;const t=await f.A.post("/categories",{profile_id:l});a(t.data.categories),c((null===(e=t.data.categories[0])||void 0===e?void 0:e.id)||null)}catch(r){var t,s;console.log(r.data),g.oR.error(null!==(t=null===r||void 0===r||null===(s=r.data)||void 0===s?void 0:s.message)&&void 0!==t?t:"Failed to fetch categories")}finally{b(!1)}};(0,s.useEffect)((()=>{j()}),[l]);return k.createPortal((0,d.jsxs)("div",{id:"authentication-modal",tabIndex:"-1","aria-hidden":"false",className:"overflow-y-auto overflow-x-hidden fixed top-0 right-0 left-0 z-50 flex justify-center items-center w-full h-full bg-black bg-opacity-50",children:[(0,d.jsx)("div",{className:"relative p-4 w-full max-w-4xl max-h-full",children:(0,d.jsxs)("div",{className:"relative bg-white rounded-lg shadow dark:bg-gray-700",children:[(0,d.jsxs)("div",{className:"flex items-center justify-between p-4 md:p-5 border-b rounded-t dark:border-gray-600",children:[(0,d.jsx)("h3",{className:"text-xl font-semibold text-gray-900 dark:text-white",children:"Add Links"}),(0,d.jsxs)("button",{type:"button",onClick:t,className:"text-gray-400 bg-transparent hover:bg-gray-200 hover:text-gray-900 rounded-lg text-sm w-8 h-8 inline-flex justify-center items-center dark:hover:bg-gray-600 dark:hover:text-white",children:[(0,d.jsx)("svg",{className:"w-3 h-3","aria-hidden":"true",xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 14 14",children:(0,d.jsx)("path",{stroke:"currentColor",strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:"2",d:"m1 1 6 6m0 0 6 6M7 7l6-6M7 7l-6 6"})}),(0,d.jsx)("span",{className:"sr-only",children:"Close modal"})]})]}),(0,d.jsx)("div",{className:"p-4 md:p-5",children:v?(0,d.jsx)("div",{className:"flex justify-center items-center h-64",children:(0,d.jsx)("span",{className:"loader"})}):(0,d.jsxs)(d.Fragment,{children:[(0,d.jsx)("div",{className:"flex overflow-x-auto space-x-4 mb-4",children:o.map((e=>(0,d.jsx)("button",{className:"px-4 py-2 rounded-lg "+(n===e.id?"bg-gray-200 text-gray-900":"bg-gray-100 text-gray-600"),onClick:()=>(e=>{var l;c(e),null===(l=p.current[e])||void 0===l||l.scrollIntoView({behavior:"smooth"})})(e.id),children:e.name},e.id)))}),(0,d.jsx)("div",{className:"flex flex-col gap-4 w-full pr-3 max-h-[400px] overflow-y-auto",children:o.map((e=>(0,d.jsxs)("div",{ref:l=>p.current[e.id]=l,className:"space-y-4",children:[(0,d.jsx)("h4",{className:"text-lg font-semibold text-gray-900",children:e.name}),(0,d.jsx)("div",{className:"grid grid-cols-1 lg:grid-cols-3 gap-4",children:e.platforms.map((e=>(0,d.jsxs)("div",{className:"flex items-center justify-between p-4 bg-white hover:bg-gray-100 cursor-pointer rounded-lg border border-gray-300",onClick:()=>(e=>{0!==r.is_pro||"1"!==e.pro?(h({id:Date.now(),user_platforms_id:null===e||void 0===e?void 0:e.id,title:e.title,icon:e.icon,baseUrl:e.baseURL,path:"",label:""}),m(!0)):g.oR.error("Upgrade to pro to use this link")})(e),children:[(0,d.jsxs)("div",{className:"flex items-center gap-4",children:[(0,d.jsx)("img",{src:`https://solvecard.net/public/storage/${e.icon}`,className:"size-5 text-center",alt:e.title[0]}),(0,d.jsx)("p",{className:"text-base font-inter font-medium text-gray-900",children:e.title})]}),(0,d.jsxs)("div",{className:"flex items-center justify-center gap-1",children:["1"===e.pro&&(0,d.jsx)("div",{className:"bg-black text-xs w-7 h-7 rounded-full text-white flex items-center justify-center",children:"Pro"}),e.Total_used>0&&(0,d.jsx)("div",{className:"bg-black text-xs w-7 h-7 rounded-full text-white flex items-center justify-center",children:e.Total_used}),(0,d.jsx)(N.GGD,{className:"text-xl text-gray-600"})]})]},e.id)))})]},e.id)))})]})})]})}),u&&(0,d.jsx)(_,{closeModal:()=>{m(!1),b(!0),j()},data:x,id:l})]}),document.body)},A=()=>{var e;const{id:l}=(0,p.g)(),t=(0,i.wA)(),[r,o]=(0,s.useState)(!1),[a,c]=(0,s.useState)(!1),[m,x]=(0,s.useState)(!1),[h,v]=(0,s.useState)(null),[b,j]=(0,s.useState)({id:"",title:"",img:"",baseUrl:""}),[y,w]=(0,s.useState)(!1),{profileData:k}=(0,i.d4)((e=>e.profile)),A=()=>{x(!1),v(null)};return(0,d.jsxs)("section",{className:"h-full flex justify-center grow bg-primary border-r-2 border-r-white",children:[(0,d.jsxs)("div",{className:"flex flex-col w-full p-8 bg-white rounded-lg",children:[(0,d.jsxs)("header",{className:"text-start w-full z-40 flex justify-between items-center mb-8",children:[(0,d.jsx)("h1",{className:"font-inter font-bold text-2xl",children:"Links"}),(0,d.jsx)(u.$n,{intent:"primary",children:"Add Link",size:"md",roundness:"round",eventAction:()=>{o(!0)}})]}),r&&(0,d.jsx)(C,{id:l,closeModal:()=>{o(!1)}}),a&&(0,d.jsx)(_,{closeModal:async()=>{c(!1)},data:b,id:l}),(0,d.jsx)("div",{className:"lg:h-[520px] md:h-[420px] h-[320px] overflow-y-auto flex flex-col gap-4 w-full",id:"linksSection",children:(0,d.jsx)("div",{className:"flex flex-col gap-4 w-full",children:(null===k||void 0===k?void 0:k.platforms.length)>0?(0,d.jsx)(d.Fragment,{children:null===k||void 0===k||null===(e=k.platforms)||void 0===e?void 0:e.map((e=>(0,d.jsx)("div",{className:"space-y-4",children:(0,d.jsxs)("div",{className:"flex items-center justify-between p-4 bg-gray-100 hover:bg-gray-200 cursor-pointer rounded-lg",children:[(0,d.jsxs)("div",{className:"flex items-center gap-4",children:[(0,d.jsx)("img",{src:`https://solvecard.net/public/storage/${e.icon}`,className:"size-5 text-center",alt:e.label}),(0,d.jsx)("p",{className:"text-base font-inter font-medium text-gray-900",children:e.label})]}),(0,d.jsxs)("div",{className:"flex items-center gap-2",children:[(0,d.jsxs)("label",{className:"inline-flex items-center cursor-pointer",children:[(0,d.jsx)("input",{type:"checkbox",className:"sr-only peer",checked:e.direct,onChange:()=>(async e=>{try{await f.A.post("/platformDirect",{user_platform_id:e.id,profile_id:l}),t((0,n.ib)({...e,direct:!e.direct})),g.oR.success("Platform direct status updated successfully")}catch(s){g.oR.error("Failed to update platform direct")}})(e)}),(0,d.jsx)("div",{className:"relative w-11 h-6 bg-gray-200 peer-focus:outline-none peer-focus:ring-4 peer-focus:ring-white rounded-full peer peer-checked:after:translate-x-full rtl:peer-checked:after:-translate-x-full peer-checked:after:border-white after:content-[''] after:absolute after:top-[2px] after:start-[2px] after:bg-white after:border-gray-300 after:border after:rounded-full after:h-5 after:w-5 after:transition-all peer-checked:bg-black"})]}),(0,d.jsx)(N.SG1,{className:"text-xl text-gray-600",onClick:()=>((e,l,t,s,r,o,a)=>{c(!0),j((i=>({...i,id:e,user_platforms_id:a,title:l,icon:t,baseUrl:s,path:r,label:o})))})(e.id,e.title,e.icon,e.baseUrl,e.path,e.label,e.user_platforms_id)}),(0,d.jsx)(N.IXo,{className:"text-xl text-gray-600",onClick:()=>{return l=e.user_platforms_id,v(l),void x(!0);var l}})]})]})},e.id)))}):(0,d.jsx)("div",{className:"space-y-4",children:(0,d.jsx)("h2",{className:"font-inter font-medium animate-pulse",children:"This profile doesn\u2019t have any linked content yet."})})})})]}),m&&(0,d.jsx)("div",{className:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50",children:(0,d.jsxs)("div",{className:"bg-white rounded-lg shadow-lg p-6 w-full max-w-md",children:[(0,d.jsx)("h2",{className:"text-xl font-semibold mb-4",children:"Confirm Deletion"}),(0,d.jsx)("p",{className:"mb-6",children:"Are you sure you want to delete?"}),(0,d.jsxs)("div",{className:"flex justify-end gap-4",children:[(0,d.jsx)(u.$n,{type:"button",intent:"secondary",children:"Cancel",size:"sm",roundness:"round",eventAction:A}),(0,d.jsx)(u.$n,{type:"button",intent:"primary",children:"Confirm",size:"sm",roundness:"round",loading:y,eventAction:async()=>{w(!0);try{await f.A.post("/removePlatform",{user_platform_id:h}),t((0,n.OH)(h)),g.oR.success("Platform removed successfully"),A()}catch(e){g.oR.error("Failed to remove platform")}finally{w(!1)}}})]})]})})]})},S=()=>{const{id:e}=(0,p.g)(),l=(0,i.wA)(),{profileData:t}=(0,i.d4)((e=>e.profile)),r=(0,i.d4)((e=>{var l;return null===e||void 0===e||null===(l=e.auth)||void 0===l?void 0:l.user})),[o,a]=(0,s.useState)([]),[c,m]=(0,s.useState)(null),[x,h]=(0,s.useState)(null),[j,y]=(0,s.useState)(null),[w,k]=(0,s.useState)(!1),[_,C]=(0,s.useState)(!0),[A,S]=(0,s.useState)(!1);(0,s.useEffect)((()=>{var e,s;t&&(m(t.qr_color||null),t.qr_logo&&h(t.qr_logo),l((0,n.hR)(null!==(e=t.qr_color)&&void 0!==e?e:"#2A9562")),l((0,n.ye)(null!==(s=t.qr_logo)&&void 0!==s?s:null)));console.log(r),(async()=>{S(!0);try{const e=await f.A.get("/buttonColors");a(e.data.buttonColors)}catch(e){console.error("Error fetching button colors:",e)}S(!1)})(),C(!1)}),[_]);const z=()=>{h(null),y(null),l((0,n.ye)(null))};return(0,d.jsx)("section",{className:"h-full flex justify-center grow bg-white border-r-2 border-r-white overflow-y-auto",children:(0,d.jsxs)("div",{className:"flex flex-col w-full p-8 bg-white rounded-lg",children:[(0,d.jsx)("header",{className:"text-start w-full z-40 flex justify-between items-center mb-8",children:(0,d.jsx)("h1",{className:"font-inter font-bold text-2xl",children:"Qr Code"})}),(0,d.jsxs)("form",{onSubmit:async s=>{if(s.preventDefault(),null!==r&&void 0!==r&&r.is_pro||null!==r&&void 0!==r&&r.is_subscribed){k(!0);try{const s={profile_id:e,qr_color:c,qr_logo:x};console.log(s,"body");200===(await f.A.post("/updateProfile",s)).status&&(g.oR.success("QR Code updated successfully"),l((0,n.cp)({...t,qr_color:c,qr_logo:x})))}catch(i){var o,a;g.oR.error((null===(o=i.response)||void 0===o||null===(a=o.data)||void 0===a?void 0:a.message)||"Error updating QR code"),console.error("Error updating QR code:",i)}finally{k(!1)}}else g.oR.error("Upgrade to Pro to create a customize QR Code")},className:"space-y-6",children:[(0,d.jsx)("div",{className:"w-full bg-primary rounded-lg p-3",children:(0,d.jsxs)("div",{className:"w-full rounded-lg flex lg:flex-row md:flex-row flex-col lg:gap-0 md:gap-0 gap-3 items-center justify-between bg-white border border-primary p-3",children:[(0,d.jsx)("label",{htmlFor:"",className:"block text-sm font-inter font-medium text-gray-900",children:"Choose QR Code Theme"}),(0,d.jsxs)("div",{className:"flex items-center justify-end flex-grow gap-2",children:[null===o||void 0===o?void 0:o.map((e=>(0,d.jsx)("div",{className:"rounded-full w-6 h-6 cursor-pointer border "+(c===e.color_code?"ring-2 ring-black ring-offset-2":""),style:{backgroundColor:e.color_code},onClick:()=>(e=>{m(e),l((0,n.hR)(e))})(e.color_code)},e.id))),A&&(0,d.jsx)("p",{children:"Loading..."})]})]})}),(0,d.jsx)("div",{className:"w-full bg-primary rounded-lg p-3",children:(0,d.jsxs)("div",{className:"bg-white p-3 rounded-lg",children:[(0,d.jsx)("label",{htmlFor:"qr-logo",className:"block text-sm font-inter font-medium text-gray-900 mb-2",children:"Custom logo"}),(0,d.jsxs)("div",{className:"flex flex-col items-center space-y-4",children:[x&&!j?(0,d.jsxs)("div",{className:"relative",children:[(0,d.jsx)("img",{src:`https://solvecard.net/public/storage/${x}`,alt:"QR Logo Preview",className:"h-24 w-24 object-contain border border-gray-200 rounded-md"}),(0,d.jsx)("button",{type:"button",onClick:z,className:"absolute -top-2 -right-2 bg-red-500 text-white rounded-full p-1 text-xs",children:"\u2715"})]}):j?(0,d.jsxs)("div",{className:"relative",children:[(0,d.jsx)("img",{src:j,alt:"QR Logo Preview",className:"h-24 w-24 object-contain border border-gray-200 rounded-md"}),(0,d.jsx)("button",{type:"button",onClick:z,className:"absolute -top-2 -right-2 bg-red-500 text-white rounded-full p-1 text-xs",children:"\u2715"})]}):(0,d.jsx)("div",{className:"flex items-center justify-center w-full",children:(0,d.jsxs)("label",{htmlFor:"qr-logo-input",className:"flex flex-col items-center justify-center w-1/2 mx-auto h-32 border-2 border-gray-300 border-dashed rounded-lg cursor-pointer bg-gray-50 hover:bg-gray-100",children:[(0,d.jsxs)("div",{className:"flex flex-col items-center justify-center pt-5 pb-6",children:[(0,d.jsx)(N.B88,{className:"w-8 h-8 text-gray-500 mb-2"}),(0,d.jsx)("p",{className:"mb-2 text-sm text-gray-500",children:(0,d.jsx)("span",{className:"font-semibold",children:"Click to upload"})})]}),(0,d.jsx)("input",{id:"qr-logo-input",type:"file",accept:"image/*",className:"hidden",onChange:async e=>{const t=e.target.files[0];if(!t||t.size>6291456)g.oR.error("logo size must be less than 6MB.");else try{const e=await(0,v.A)(t,{maxSizeMB:4,useWebWorker:!0}),s=new FileReader;s.onloadend=()=>{h((0,b.i)(s.result)),y(s.result),l((0,n.ye)(s.result))},s.readAsDataURL(e)}catch(s){console.error("Error compressing qr logo:",s)}}})]})}),(0,d.jsx)("p",{className:"text-sm text-gray-500 italic",children:"Add custom logo to be displayed in the middle of the QR Code"})]})]})}),(0,d.jsxs)("div",{className:"flex justify-end gap-4 pb-2",children:[(0,d.jsx)(u.$n,{type:"submit",intent:"primary",children:"Save QR Code",size:"sm",loading:w,roundness:"round",classes:"!bg-black !text-white"}),(0,d.jsx)(u.$n,{type:"button",intent:"secondary",children:"Reset",size:"lg",classes:"gap-2 !py-2 !px-5",eventAction:()=>{var e,s;(m(t.qr_color||null),t.qr_logo)&&(h(t.qr_logo),y(null),l((0,n.ye)(null!==(s=t.qr_logo)&&void 0!==s?s:null)));l((0,n.hR)(null!==(e=t.qr_color)&&void 0!==e?e:"#2A9562"))}})]})]})]})})},z=()=>{const e=(0,i.d4)((e=>e.profile.sectionLnk));return(0,d.jsxs)("div",{className:"w-full lg:w-[55%] overflow-hidden rounded-2xl",children:["about"===e&&(0,d.jsx)(w,{}),"links"===e&&(0,d.jsx)(A,{}),"qrCode"===e&&(0,d.jsx)(S,{})]})};var R=t(9520),q=t(9666);const L=()=>{var e;const l=(0,i.d4)((e=>e.profile.profileViewData)),t=(0,i.d4)((e=>e.profile.themeColor)),r=(0,i.d4)((e=>e.profile.textColor)),[o,a]=(0,s.useState)("center");console.log(l,"userData");const[n,c]=(0,s.useState)({url:"",base64Str:""}),[m,x]=(0,s.useState)({url:"",base64Str:""});return(0,s.useEffect)((()=>{var e;a(null!==(e=null===l||void 0===l?void 0:l.work_position)&&void 0!==e?e:"center"),null!==l&&void 0!==l&&l.photo&&(null!==l&&void 0!==l&&l.photo.startsWith("data:image/")&&c((e=>({...e,base64Str:l.photo}))),null!==l&&void 0!==l&&l.photo.startsWith("uploads/")&&c((e=>({...e,url:l.photo})))),null!==l&&void 0!==l&&l.cover_photo&&(null!==l&&void 0!==l&&l.cover_photo.startsWith("data:image/")&&x((e=>({...e,base64Str:l.cover_photo}))),null!==l&&void 0!==l&&l.cover_photo.startsWith("uploads/")&&x((e=>({...e,url:l.cover_photo}))))}),[l]),(0,d.jsx)("div",{className:"space-y-4 h-full",children:(0,d.jsxs)("div",{className:"w-full min-h-full rounded-t-3xl shadow-lg border",style:{background:t},children:[(0,d.jsxs)("div",{className:"h-32 relative",children:[(0,d.jsx)("div",{className:"w-full h-full rounded-t-3xl",children:null!==l&&void 0!==l&&l.cover_photo?(0,d.jsx)(d.Fragment,{children:null!==m&&void 0!==m&&m.base64Str?(0,d.jsx)("img",{src:null===l||void 0===l?void 0:l.cover_photo,className:"w-full h-full rounded-t-3xl object-cover",alt:"cover-pic"}):null!==m&&void 0!==m&&m.url?(0,d.jsx)("img",{src:`https://solvecard.net/public/storage/${m.url}`,className:"w-full h-full rounded-t-3xl object-cover",alt:"cover-pic"}):(0,d.jsx)("div",{className:"w-full h-full bg-gray-500 rounded-t-3xl"})}):(0,d.jsx)("div",{className:"w-full h-full bg-tertiary-gray-700 rounded-t-3xl"})}),(0,d.jsx)("div",{className:`absolute ${"left"===o?"left-4":"right"===o?"right-4":"left-1/2 -translate-x-1/2"} -bottom-1/2 w-[40%] aspect-square overflow-hidden rounded-full border-white border-4`,children:null!==l&&void 0!==l&&l.photo?(0,d.jsx)(d.Fragment,{children:n.base64Str?(0,d.jsx)("img",{src:l.photo,className:"rounded-full w-full h-full object-cover",alt:"profile"}):null!==n&&void 0!==n&&n.url?(0,d.jsx)("img",{src:`https://solvecard.net/public/storage/${n.url}`,className:"rounded-full w-full h-full object-cover",alt:"profile"}):(0,d.jsx)(q.k,{src:R.A})}):(0,d.jsx)("div",{className:"w-full h-full flex items-center justify-center bg-gray-100",children:(0,d.jsx)("img",{src:R.A,alt:"",className:"w-1/2"})})})]}),(0,d.jsxs)("div",{className:`w-full flex flex-col \n            ${"left"===o?"justify-start items-start text-left":"right"===o?"justify-end items-end text-right":"justify-center items-center text-center"}\n             mt-20 px-4`,children:[(0,d.jsx)("h3",{style:{color:r},children:null===l||void 0===l?void 0:l.name}),(0,d.jsx)("p",{style:{color:r},children:null===l||void 0===l?void 0:l.job_title}),(0,d.jsx)("p",{style:{color:r},children:null===l||void 0===l?void 0:l.company}),(0,d.jsx)("p",{style:{color:r},children:null===l||void 0===l?void 0:l.address}),(0,d.jsx)("p",{style:{color:r},className:"break-all mt-1",children:null===l||void 0===l?void 0:l.bio})]}),(0,d.jsx)("div",{className:"w-full flex justify-center items-center mt-4 px-4",children:(0,d.jsx)(u.$n,{style:{background:r,color:"white",borderColor:r},intent:"secondary",children:"Update",size:"md",roundness:"round",classes:"w-full"})}),(0,d.jsx)("div",{className:"left"===o?"w-full flex flex-col items-start text-left gap-2 px-4 my-4":"right"===o?"w-full flex flex-col items-end text-right gap-2 px-4 my-4":"w-full flex flex-wrap items-start justify-center gap-2 px-4 my-4",children:null===l||void 0===l||null===(e=l.platforms)||void 0===e?void 0:e.filter((e=>e.direct)).map(((e,l)=>{var t;return(0,d.jsxs)("div",{className:"left"===o?"w-full flex flex-row items-center justify-start gap-2":"right"===o?"w-full flex flex-row-reverse items-center justify-start gap-2":"flex flex-col items-center justify-start gap-2",style:{width:"center"===o?"calc(33.33% - 8px)":"100%"},children:[(0,d.jsx)("div",{style:{width:"center"===o?"100%":"80px"},children:(0,d.jsx)("img",{className:"w-full",src:`https://solvecard.net/public/storage/${e.icon}`,alt:e.title})}),(0,d.jsx)("p",{className:"font-inter text-base font-normal text-center",style:{color:r},children:null!==(t=e.label)&&void 0!==t?t:e.title})]},l)}))})]})})};var F=t(5475);const $=()=>(0,d.jsx)("section",{className:"w-full lg:w-3/12 lg:col-span-2 justify-center overflow-y-auto",id:"profileView",children:(0,d.jsxs)("div",{className:"w-full flex-col gap-4 py-4 h-full",children:[(0,d.jsxs)("div",{className:"flex flex-col gap-4 text-center mb-2",children:[(0,d.jsx)("div",{className:"text-start w-full",children:(0,d.jsx)("h1",{className:"font-inter font-bold text-xl",children:"Card live preview"})}),(0,d.jsxs)(F.N_,{className:"font-normal text-md text-blue-400",to:"",children:["View Card ",(0,d.jsx)(r.LS3,{className:"font-extrabold text-base inline-block"})]})]}),(0,d.jsx)(L,{})]})});var P=t(3245),M=t(8626);const E=()=>{const{id:e}=(0,p.g)(),{profileData:l}=(0,i.d4)((e=>e.profile)),t=(0,i.d4)((e=>e.profile.qrColor)),s=(0,i.d4)((e=>e.profile.qrPhoto));return console.log(s,t),(0,d.jsx)("section",{className:"w-full lg:w-3/12 lg:col-span-2 justify-center overflow-y-auto",children:(0,d.jsxs)("div",{className:"w-full flex-col gap-4 py-4 h-full",children:[(0,d.jsx)("div",{className:"flex flex-col gap-4 text-center mb-2",children:(0,d.jsx)("div",{className:"text-start w-full",children:(0,d.jsxs)("h1",{className:"font-inter font-bold text-xl",children:[null===l||void 0===l?void 0:l.name," QR Code"]})})}),(0,d.jsx)("div",{className:"flex items-center justify-center my-6",children:(0,d.jsxs)("div",{className:"relative bg-white p-4 rounded-lg shadow-md inline-block",children:[(0,d.jsx)(P.Ay,{value:null===l||void 0===l?void 0:l.card_uuid,size:250,fgColor:t,level:"H"}),(0,d.jsx)("div",{className:"absolute inset-0 flex items-center justify-center",children:s?(0,d.jsx)(d.Fragment,{children:s.startsWith("data:image/")?(0,d.jsx)("img",{src:s,className:"h-11 w-11 object-contain bg-white rounded-md",alt:"QR logo"}):s.startsWith("uploads/")?(0,d.jsx)("img",{src:`https://solvecard.net/public/storage/${s}`,className:"h-11 w-11 object-contain bg-white rounded-md",alt:"QR logo"}):(0,d.jsx)("img",{src:M.A,className:"h-11 w-11 object-contain bg-white rounded-md",alt:"QR logo"})}):(0,d.jsx)("img",{src:M.A,className:"h-11 w-11 object-contain bg-white rounded-md",alt:"QR logo"})})]})})]})})},U=()=>{const e=(0,i.d4)((e=>e.profile.sectionLnk));return(0,d.jsxs)("section",{className:"w-full h-full lg:h-[calc(100vh-100px)] flex flex-col lg:flex-row gap-4 rounded-2xl bg-primary p-4",children:[(0,d.jsx)(c,{}),(0,d.jsx)(z,{}),"qrCode"===e?(0,d.jsx)(E,{}):(0,d.jsx)($,{})]})},D=e=>{const l=(0,i.d4)((e=>e.profile.profileId)),[t,r]=(0,s.useState)(!1),[o,a]=(0,s.useState)(""),[c,m]=(0,s.useState)("#2A9562"),x=(0,i.wA)();(0,s.useEffect)((()=>{var l;(null!==e&&void 0!==e&&e.card_uuid&&a(e.card_uuid),null!==e&&void 0!==e&&e.button_color)&&m((null===(l=e.button_color)||void 0===l?void 0:l.color_code)||"#000000")}),[e]);return(0,d.jsxs)("div",{className:"bg-primary  p-4 rounded-2xl relative flex flex-col justify-between "+(Number(l)===(null===e||void 0===e?void 0:e.id)?"border border-tertiary-green-50":""),children:[(0,d.jsx)("div",{className:"bg-tertiary-gray-700 rounded-t-2xl w-full h-32",children:e.cover_photo&&(0,d.jsx)("img",{src:`https://solvecard.net/public/storage/${e.cover_photo}`,className:"w-full h-32 rounded-t-2xl object-cover",alt:"cover_photo"})}),e.photo&&(0,d.jsx)("img",{src:`https://solvecard.net/public/storage/${e.photo}`,className:"size-20 rounded-full border border-secondary object-cover flex justify-center items-center z-10 absolute top-24 left-1/2 transform -translate-x-1/2",alt:"profile"}),!e.photo&&(0,d.jsx)("div",{className:"size-20 rounded-full border border-secondary bg-primary flex justify-center items-center z-10 absolute top-24 left-1/2 transform -translate-x-1/2",children:(0,d.jsx)(q.k,{src:R.A})}),(0,d.jsxs)("div",{className:"flex flex-col justify-center items-center gap-2 mt-12",children:[(0,d.jsx)("h3",{className:"font-inter font-semibold text-lg",children:null===e||void 0===e?void 0:e.name}),(0,d.jsx)("p",{className:"font-inter font-normal text-base",children:null===e||void 0===e?void 0:e.job_title}),(0,d.jsxs)("div",{className:"flex gap-2 items-center",children:[(0,d.jsx)(u.$n,{type:"button",intent:"primary",size:"md",children:"Share",classes:"",eventAction:()=>r(!0)}),(0,d.jsx)(j.A,{intent:"secondary",size:"md",content:"Edit",classes:"gap-2",iconLeft:y.A,href:`/profile/${null===e||void 0===e?void 0:e.id}`,eventAction:()=>{return l=e,x((0,n.kx)("about")),void x((0,n.cp)(l));var l}})]})]}),t&&(0,d.jsx)("div",{className:"fixed inset-0 bg-black bg-opacity-50 flex justify-center items-center z-50",children:(0,d.jsxs)("div",{className:"relative bg-white rounded-lg shadow w-full max-w-lg",children:[(0,d.jsxs)("div",{className:"flex items-center justify-between p-2 md:p-5 border-b rounded-t",children:[(0,d.jsx)("h3",{className:"text-xl font-semibold text-gray-900 ",children:"Share Card"}),(0,d.jsxs)("button",{type:"button",onClick:()=>r(!1),className:"text-gray-400 bg-transparent hover:bg-gray-200 hover:text-gray-900 rounded-lg text-sm w-8 h-8 inline-flex justify-center items-center ",children:[(0,d.jsx)("svg",{className:"w-3 h-3","aria-hidden":"true",xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 14 14",children:(0,d.jsx)("path",{stroke:"currentColor",strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:"2",d:"m1 1 6 6m0 0 6 6M7 7l6-6M7 7l-6 6"})}),(0,d.jsx)("span",{className:"sr-only",children:"Close modal"})]})]}),(0,d.jsxs)("div",{className:"my-4 flex flex-col items-center",children:[(0,d.jsx)("h4",{className:"text-lg font-medium mb-2 text-center",children:"Scan QR Code"}),(0,d.jsx)("div",{className:"bg-white rounded-lg shadow-sm inline-block",children:(0,d.jsxs)("div",{className:"relative",children:[(0,d.jsx)(P.Ay,{id:"profile-qr-code",value:o,size:170,fgColor:(null===e||void 0===e?void 0:e.qr_color)||c,style:{maxWidth:"100%",height:"auto"},level:"H"}),(0,d.jsx)("div",{className:"absolute inset-0 flex items-center justify-center",children:(0,d.jsx)("img",{src:null!==e&&void 0!==e&&e.qr_logo?`https://solvecard.net/public/storage/${e.qr_logo}`:M.A,className:"h-11 w-11 object-contain bg-white rounded-md",alt:"QR logo"})})]})}),(0,d.jsx)("p",{className:"text-xs text-gray-500 mt-2",children:"Scan the code by placing camera in front of code"})]}),(0,d.jsx)("div",{className:"px-8",children:(0,d.jsxs)("div",{className:"py-6 border-t",children:[(0,d.jsx)("p",{className:"text-lg font-medium mb-2 text-center",children:"Share Profile Link"}),(0,d.jsxs)("div",{className:"w-full flex items-center justify-between bg-gray-50 border border-gray-200 rounded-lg overflow-hidden",children:[(0,d.jsx)("div",{className:"w-full px-3 py-2 overflow-hidden overflow-ellipsis whitespace-nowrap text-gray-600",children:null===e||void 0===e?void 0:e.card_uuid}),(0,d.jsxs)("button",{onClick:()=>{navigator.clipboard.writeText(null===e||void 0===e?void 0:e.card_uuid),g.oR.success("Link copied to clipboard!")},className:"bg-secondary hover:bg-tertiary-green-65 transition-colors text-white px-4 py-2 h-full flex items-center justify-center gap-1",children:[(0,d.jsxs)("svg",{xmlns:"http://www.w3.org/2000/svg",className:"h-5 w-5",viewBox:"0 0 20 20",fill:"currentColor",children:[(0,d.jsx)("path",{d:"M8 3a1 1 0 011-1h2a1 1 0 110 2H9a1 1 0 01-1-1z"}),(0,d.jsx)("path",{d:"M6 3a2 2 0 00-2 2v11a2 2 0 002 2h8a2 2 0 002-2V5a2 2 0 00-2-2 3 3 0 01-3 3H9a3 3 0 01-3-3z"})]}),"Copy"]})]}),(0,d.jsx)("p",{className:"text-xs text-gray-500 mt-2 text-center",children:"Share this link to let others view your profile"})]})})]})})]},null===e||void 0===e?void 0:e.id)};var B=t(423);const Q=e=>{let{onClose:l}=e;return(0,d.jsx)("div",{className:"fixed inset-0 flex items-center justify-center bg-black bg-opacity-50 z-50",children:(0,d.jsxs)("div",{className:"bg-white p-6 rounded-lg shadow-lg max-w-lg",children:[(0,d.jsxs)("div",{className:"flex items-end mb-4",children:[(0,d.jsxs)("div",{className:"flex items-end border-r-2 pr-4",children:[(0,d.jsx)("p",{className:"font-inter font-bold text-3xl",children:"Solve"}),(0,d.jsx)("span",{className:"font-inter font-medium text-xl",children:"Card"})]}),(0,d.jsx)("h6",{className:"ps-4 text-xl font-lg",children:"Download the app"})]}),(0,d.jsx)("p",{className:"mb-4",children:"Upgrade to pro by scanning this Qr code to download mobile app."}),(0,d.jsx)("div",{className:"flex justify-center mb-4",children:(0,d.jsx)(P.Ay,{value:"https://example.com/download-app"})}),(0,d.jsx)("p",{className:"text-center",children:"Scan this QR code to get the app on"}),(0,d.jsx)("p",{className:"text-center",children:"iPhone or Android"}),(0,d.jsx)("div",{className:"flex justify-end mt-4",children:(0,d.jsx)(u.$n,{type:"button",intent:"secondary",size:"md",children:"Close",classes:"",eventAction:l})})]})})},T=e=>{let{onClose:l,onProfileAdded:t}=e;const[r,o]=(0,s.useState)(!1),[a,i]=(0,s.useState)({card_title:"",name:"",company:"",job_title:""}),n=e=>{const{name:l,value:t}=e.target;i({...a,[l]:t})};return(0,d.jsx)("div",{className:"fixed inset-0 flex items-center justify-center bg-black bg-opacity-50 z-50",children:(0,d.jsxs)("div",{className:"relative bg-white rounded-lg shadow w-full max-w-lg",children:[(0,d.jsxs)("div",{className:"flex items-center justify-between p-4 md:p-5 border-b rounded-t",children:[(0,d.jsx)("h3",{className:"text-xl font-semibold text-gray-900 ",children:"Add Card"}),(0,d.jsxs)("button",{type:"button",onClick:l,className:"text-gray-400 bg-transparent hover:bg-gray-200 hover:text-gray-900 rounded-lg text-sm w-8 h-8 inline-flex justify-center items-center ",children:[(0,d.jsx)("svg",{className:"w-3 h-3","aria-hidden":"true",xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 14 14",children:(0,d.jsx)("path",{stroke:"currentColor",strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:"2",d:"m1 1 6 6m0 0 6 6M7 7l6-6M7 7l-6 6"})}),(0,d.jsx)("span",{className:"sr-only",children:"Close modal"})]})]}),(0,d.jsxs)("form",{onSubmit:async e=>{e.preventDefault(),o(!0);const{card_title:s,name:r,company:i,job_title:n}=a;if(s&&r&&i&&n)try{const e=await f.A.post("/addProfile",a);var d;if(200===e.status)g.oR.success(null===e||void 0===e||null===(d=e.data)||void 0===d?void 0:d.message),o(!1),t(),l()}catch(m){var c,u;console.error(m),g.oR.error(null===(c=m.response)||void 0===c||null===(u=c.data)||void 0===u?void 0:u.message),o(!1)}else g.oR.error("All fields are required.")},className:"p-4 md:p-5",children:[(0,d.jsxs)("div",{className:"mb-4",children:[(0,d.jsx)("label",{className:"block text-gray-700 text-sm font-bold mb-2",htmlFor:"card_title",children:"Card Title"}),(0,d.jsx)(u.pd,{type:"text",name:"card_title",intent:"primary",id:"card-title",size:"md",value:a.card_title,classes:"w-full block p-2.5",roundness:"round-sm",placeholder:"Card Title",custom:"custom",eventAction:n})]}),(0,d.jsxs)("div",{className:"mb-4",children:[(0,d.jsx)("label",{className:"block text-gray-700 text-sm font-bold mb-2",htmlFor:"name",children:"Name"}),(0,d.jsx)(u.pd,{type:"text",name:"name",value:a.name,eventAction:n,intent:"primary",size:"md",classes:"w-full block p-2.5",roundness:"round-sm",placeholder:"Name",custom:"custom",required:!0})]}),(0,d.jsxs)("div",{className:"mb-4",children:[(0,d.jsx)("label",{className:"block text-gray-700 text-sm font-bold mb-2",htmlFor:"company",children:"Company"}),(0,d.jsx)(u.pd,{type:"text",name:"company",value:a.company,eventAction:n,intent:"primary",size:"md",classes:"w-full block p-2.5",roundness:"round-sm",placeholder:"Company",custom:"custom",required:!0})]}),(0,d.jsxs)("div",{className:"mb-4",children:[(0,d.jsx)("label",{className:"block text-gray-700 text-sm font-bold mb-2",htmlFor:"job_title",children:"Job Title"}),(0,d.jsx)(u.pd,{type:"text",name:"job_title",value:a.job_title,eventAction:n,intent:"primary",size:"md",classes:"w-full block p-2.5",roundness:"round-sm",placeholder:"Job Title",custom:"custom",required:!0})]}),(0,d.jsxs)("div",{className:"flex justify-end mt-4",children:[(0,d.jsx)(u.$n,{type:"button",intent:"secondary",size:"md",children:"Close",classes:"",eventAction:l}),(0,d.jsx)(u.$n,{type:"submit",intent:"primary",size:"md",children:"Submit",classes:"ml-2",loading:r})]})]})]})})},W=e=>{let{onProfileAdded:l}=e;const[t,r]=(0,s.useState)(!1),[o,a]=(0,s.useState)(""),n=(0,i.d4)((e=>{var l;return null===e||void 0===e||null===(l=e.auth)||void 0===l?void 0:l.user})),c=()=>{r(!1)};return(0,d.jsxs)(d.Fragment,{children:[(0,d.jsxs)("div",{className:"bg-primary p-4 rounded-2xl h-full min-h-64 relative flex flex-col gap-2 justify-center items-center cursor-pointer",onClick:()=>{null!==n&&void 0!==n&&n.is_pro&&null!==n&&void 0!==n&&n.is_subscribed?(a("addProfile"),r(!0)):(a("qrCode"),r(!0))},children:[(0,d.jsx)("div",{className:"bg-gradient-to-t from-tertiary-green-60 to-tertiary-green-70 size-16 rounded-full flex justify-center items-center",children:(0,d.jsx)(B.t50,{className:"size-8"})}),(0,d.jsx)("p",{className:"font-inter font-medium text-lg text-center",children:"New Card"})]}),t&&"qrCode"===o&&(0,d.jsx)(Q,{onClose:c}),t&&"addProfile"===o&&(0,d.jsx)(T,{onClose:c,onProfileAdded:l})]})}},5313:(e,l,t)=>{t.d(l,{i:()=>s});const s=function(e){let l=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"image/jpeg";const t=atob(e.split(",")[1]),s=new ArrayBuffer(t.length),r=new Uint8Array(s);for(let o=0;o<t.length;o++)r[o]=t.charCodeAt(o);return new Blob([r],{type:l})}}}]);
//# sourceMappingURL=622.bd0cf41f.chunk.js.map